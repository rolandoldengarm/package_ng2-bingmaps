{"version":3,"sources":["directives/bing-map-marker.ts"],"names":[],"mappings":"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","file":"directives/bing-map-marker.js","sourcesContent":["import {Directive, SimpleChange, OnDestroy, OnChanges, EventEmitter, ContentChild, AfterContentInit} from '@angular/core';\r\nimport {MarkerManager} from '../services/marker-manager';\r\nimport {BingMapInfoWindow} from './bing-map-info-window';\r\nimport * as mapTypes from '../services/bing-maps-types';\r\n\r\nlet markerId = 0;\r\n\r\n/**\r\n * SebmGoogleMapMarker renders a map marker inside a {@link SebmGoogleMap}.\r\n *\r\n * ### Example\r\n * ```typescript\r\n * import {Component} from 'angular2/core';\r\n * import {SebmGoogleMap, SebmGoogleMapMarker} from 'angular2-google-maps/core';\r\n *\r\n * @Component({\r\n *  selector: 'my-map-cmp',\r\n *  directives: [SebmGoogleMap, SebmGoogleMapMarker],\r\n *  styles: [`\r\n *    .sebm-google-map-container {\r\n *      height: 300px;\r\n *    }\r\n * `],\r\n *  template: `\r\n *    <sebm-google-map [latitude]=\"lat\" [longitude]=\"lng\" [zoom]=\"zoom\">\r\n *      <sebm-google-map-marker [latitude]=\"lat\" [longitude]=\"lng\" [label]=\"'M'\">\r\n *      </sebm-google-map-marker>\r\n *    </sebm-google-map>\r\n *  `\r\n * })\r\n * ```\r\n */\r\n@Directive({\r\n  selector: 'bing-map-marker',\r\n  inputs: ['latitude', 'longitude', 'title', 'label', 'draggable: markerDraggable', 'iconUrl'],\r\n  outputs: ['markerClick', 'dragEnd']\r\n})\r\nexport class BingMapMarker implements OnDestroy,\r\n    OnChanges, AfterContentInit {\r\n  /**\r\n   * The latitude position of the marker.\r\n   */\r\n  latitude: number;\r\n\r\n  /**\r\n   * The longitude position of the marker.\r\n   */\r\n  longitude: number;\r\n\r\n  /**\r\n   * The title of the marker.\r\n   */\r\n  title: string;\r\n\r\n  /**\r\n   * The label (a single uppercase character) for the marker.\r\n   */\r\n  label: string;\r\n\r\n  /**\r\n   * If true, the marker can be dragged. Default value is false.\r\n   */\r\n  draggable: boolean = false;\r\n\r\n  /**\r\n   * Icon (the URL of the image) for the foreground.\r\n   */\r\n  iconUrl: string;\r\n\r\n  /**\r\n   * This event emitter gets emitted when the user clicks on the marker.\r\n   */\r\n  markerClick: EventEmitter<void> = new EventEmitter<void>();\r\n\r\n  /**\r\n   * This event is fired when the user stops dragging the marker.\r\n   */\r\n  dragEnd: EventEmitter<MouseEvent> = new EventEmitter<MouseEvent>();\r\n\r\n  @ContentChild(BingMapInfoWindow) private _infoWindow: BingMapInfoWindow;\r\n\r\n  private _markerAddedToManger: boolean = false;\r\n  private _id: string;\r\n\r\n  constructor(private _markerManager: MarkerManager) { this._id = (markerId++).toString(); }\r\n\r\n  /* @internal */\r\n  ngAfterContentInit() {\r\n    if (this._infoWindow != null) {\r\n      this._infoWindow.hostMarker = this;\r\n    }\r\n  }\r\n\r\n  /** @internal */\r\n  ngOnChanges(changes: {[key: string]: SimpleChange}) {\r\n    if (typeof this.latitude !== 'number' || typeof this.longitude !== 'number') {\r\n      return;\r\n    }\r\n    if (!this._markerAddedToManger) {\r\n      this._markerManager.addMarker(this);\r\n      this._markerAddedToManger = true;\r\n      this._addEventListeners();\r\n      return;\r\n    }\r\n    if (changes['latitude'] || changes['longitude']) {\r\n      this._markerManager.updateMarkerPosition(this);\r\n    }\r\n    if (changes['title']) {\r\n      this._markerManager.updateTitle(this);\r\n    }\r\n    if (changes['label']) {\r\n      this._markerManager.updateLabel(this);\r\n    }\r\n    if (changes['draggable']) {\r\n      this._markerManager.updateDraggable(this);\r\n    }\r\n    if (changes['iconUrl']) {\r\n      this._markerManager.updateIcon(this);\r\n    }\r\n  }\r\n\r\n  private _addEventListeners() {\r\n    this._markerManager.createEventObservable('click', this).subscribe(() => {\r\n      if (this._infoWindow != null) {\r\n        this._infoWindow.open();\r\n      }\r\n      this.markerClick.next(null);\r\n    });\r\n    this._markerManager.createEventObservable<mapTypes.MouseEvent>('dragend', this)\r\n        .subscribe((e: mapTypes.MouseEvent) => {\r\n          console.log('marker dragend, event: ' + e);\r\n          // todo\r\n          // this.dragEnd.next({coords: {lat: e.latLng.lat(), lng: e.latLng.lng()}});\r\n        });\r\n  }\r\n\r\n  /** @internal */\r\n  id(): string { return this._id; }\r\n\r\n  /** @internal */\r\n  toString(): string { return 'BingMapMarker-' + this._id.toString(); }\r\n\r\n  /** @internal */\r\n  ngOnDestroy() { this._markerManager.deleteMarker(this); }\r\n}\r\n"],"sourceRoot":"/source/"}